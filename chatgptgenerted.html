<!DOCTYPE html>
<html>
<head>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0/css/select2.min.css" rel="stylesheet" />
</head>
<body>
  <div>
    <label for="countries">Country:</label>
    <select id="countries">
      <option value="">Select a country</option>
      <option value="1">USA</option>
      <option value="2">Canada</option>
    </select>
  </div>

  <div>
    <label for="cities">City:</label>
    <select id="cities">
      <option value="">Select a city</option>
    </select>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0/js/select2.min.js"></script>
  <script>
    $(document).ready(function() {
      // Initialize the country select2
      $('#countries').select2();

      // Event handler for when the country selection changes
      $('#countries').on('change', function() {
        var countryId = $(this).val();

        // Clear the city select options
        $('#cities').empty();

        if (countryId !== '') {
          // Simulating AJAX call to fetch cities based on the selected country
          var cities = getCitiesByCountry(countryId);

          // Add the cities to the city select options
          $.each(cities, function(index, city) {
            $('#cities').append('<option value="' + city.id + '">' + city.name + '</option>');
          });
        }
      });

      // Initialize the city select2
      $('#cities').select2();
    });

    // Simulated function to fetch cities based on the selected country
    function getCitiesByCountry(countryId) {
      var cities = [];
      if (countryId === '1') {
        cities = [
          { id: '1', name: 'New York' },
          { id: '2', name: 'Los Angeles' },
          { id: '3', name: 'Chicago' }
        ];
      } else if (countryId === '2') {
        cities = [
          { id: '4', name: 'Toronto' },
          { id: '5', name: 'Vancouver' },
          { id: '6', name: 'Montreal' }
        ];
      }
      return cities;
    }
  </script>
</body>
</html>
